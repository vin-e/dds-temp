import{r as t,d as i,h as s,H as e}from"./p-31571bfb.js";import"./p-1660bf9c.js";import{c as r,A as o}from"./p-c25b6b30.js";const n=class{constructor(s){t(this,s),this.filterComposite=[r()],this.filterCompositeChanged=i(this,"filterCompositeChanged",7)}async setFilterComposite(t){const i=[];let s=0;t.map((t,e)=>{const r=(t,r)=>{i.push(0===r&&0!==e?Object.assign(Object.assign({},t),{andOr:o.or,id:s}):Object.assign(Object.assign({},t),{andOr:o.and,id:s})),s++};Array.isArray(t)?t.map(r):r(t,0)}),this.filterComposite=i}getIndex(t){return this.filterComposite.findIndex(({id:i})=>i===t)}onAndClicked(t){const i=this.getIndex(t.detail.id)+1;this.filterComposite.splice(i,0,r()),this.updateFilterComposite()}onOrClicked(t){const i=this.getIndex(t.detail.id)+1;this.filterComposite.splice(i,0,r({andOr:o.or})),this.updateFilterComposite()}onRemoveClicked(t){const i=this.getIndex(t.detail.id);this.filterComposite.splice(i,1),this.updateFilterComposite()}onFilterChanged(t,i){this.filterComposite[i]=t.detail.filter,this.updateFilterComposite()}updateFilterComposite(){this.filterComposite=this.filterComposite.map(t=>t);const t=this.filterComposite.reduce((t,i)=>{const{andOr:s}=i,e=function(t,i){var s={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.indexOf(e)<0&&(s[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(e=Object.getOwnPropertySymbols(t);r<e.length;r++)i.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(t,e[r])&&(s[e[r]]=t[e[r]])}return s}(i,["id","andOr"]);return 0===t.length?(t.push([e]),t):s===o.or?(t.push([e]),t):(t[t.length-1].push(e),t)},[]);this.filterCompositeChanged.emit({filter:t})}render(){return s(e,{class:"dds-filter-composite"},this.filterComposite.map((t,i)=>s("div",{key:t.id},function(t,i){if(0!==i)return s("div",{class:"dds-filter-composite--separator"},t.andOr===o.or?"Or":"And")}(t,i),s("dds-filter",{onAndClicked:t=>this.onAndClicked(t),onOrClicked:t=>this.onOrClicked(t),onRemoveClicked:t=>this.onRemoveClicked(t),onFilterChanged:t=>this.onFilterChanged(t,i),columns:this.columns,filter:t,isFirstFilter:0===i&&1===this.filterComposite.length}))))}static get style(){return".dds-filter-composite--separator{text-transform:uppercase;background:var(--color-grey-10);border-radius:1000px;height:24px;line-height:24px;width:100px;text-align:center;-ms-flex-line-pack:center;align-content:center;margin:0 auto;margin-top:20px;margin-bottom:20px}"}};export{n as dds_filter_composite};