import{r as t,h as s,H as e,c as i,d}from"./p-31571bfb.js";const l=class{constructor(s){t(this,s)}setValue(){this.isOpen=this.value,this.isOpen&&this.show()}async show(){this.el.getElementsByTagName("dds-popper")[0].show(),this.isOpen=!0}async hide(){this.el.getElementsByTagName("dds-popper")[0].hide(),this.isOpen=!1}async toggle(){this.el.getElementsByTagName("dds-popper")[0].toggle(),this.isOpen=!this.isOpen}updatePopperValue(t){t&&t.detail&&(this.isOpen=t.detail.value)}componentDidLoad(){this.value&&this.setValue()}render(){const t=["dds-dropdown",this.isOpen?"dds-dropdown--active":void 0].join(" ");return s(e,{class:t},s("dds-popper",{value:this.isOpen,popperOptions:this.popperOptions},s("dds-popper-anchor",null,s("slot",{name:"anchor"},s("button",{class:"dds-dropdown__default-button"},s("dds-icon",{class:"dds-dropdown__icon",icon:"triple-dot"})))),s("dds-popper-content",null,s("dds-panel",null,s("slot",null)))))}get el(){return i(this)}static get watchers(){return{value:["setValue"]}}static get style(){return".dds-dropdown dds-popper-anchor button{background-color:var(--color-grey-10);border:var(--border-default);border-radius:var(--border-radius-02);-webkit-box-sizing:border-box;box-sizing:border-box;display:inline-block;min-height:28px;min-width:28px;padding:6px 8px}.dds-dropdown dds-popper-anchor button.dds-dropdown__default-button{height:28px;width:28px;padding:0;border-radius:var(--border-radius-03)}.dds-dropdown--active dds-popper-anchor button{background-color:var(--color-primary-04);border-color:var(--color-primary-04);color:var(--color-grey-11)}.dds-dropdown dds-popper-anchor{display:inline-block;position:relative}.dds-dropdown__icon{color:var(--color-grey-05)}"}},n=class{constructor(s){t(this,s)}render(){return s(e,null,s("label",{class:"dds-label",htmlFor:this.componentId},s("slot",{name:"before"}),s("slot",null),s("slot",{name:"after"})))}static get style(){return".dds-label{font-size:var(--font-size-label,.75rem);text-transform:var(--label-text-transform);color:var(--color-grey-04);display:-ms-inline-flexbox;display:inline-flex}.dds-label>[slot=before]{-ms-flex-order:-1;order:-1}.dds-label>[slot=before]+*{-ms-flex-order:0;order:0}.dds-label>[slot=after]{-ms-flex-order:1;order:1}"}},o=class{constructor(s){t(this,s),this.inputId=`dds-select-${h++}`,this.name=this.inputId,this.placeholder="Select an option",this.expanded=!1,this.filterQuery="",this.selectOptions=[],this.ddsSelectValueChanged=d(this,"ddsSelectValueChanged",7)}get childOptions(){return Array.from(this.el.children).filter(t=>t.matches("dds-select-option"))}updatePanelContents(t){t&&(this.setSelectOptions(),this.filterable&&setTimeout(()=>{this.filterInput.querySelector("input").focus()}))}setInitialValue(){const t=this.childOptions.filter(t=>t.selected),s=Array.isArray(this.value);if(this.multiple)t.length>0?this.value=t.map(t=>t.value):s&&this.value.length>0&&this.childOptions.filter(t=>this.value.includes(t.value)).forEach(t=>t.selected=!0);else if(t&&t.length>1&&t.filter((t,s)=>s>0).forEach(t=>t.selected=!1),t&&t.length>0)this.value=t[0].value;else if(null!==this.value){const t=s?this.value[0]:this.value,e=this.childOptions.find(s=>s.value===t);e&&(e.selected=!0)}}setSelectOptions(){this.selectOptions=this.childOptions.map(t=>{const{id:s,disabled:e,innerText:i,selected:d,value:l}=t;return{id:s,disabled:e,label:i,selected:d,value:l}})}componentDidLoad(){this.setInitialValue(),this.setSelectOptions(),this.setMutationObserver()}setMutationObserver(){this.mutationObserver=new MutationObserver(()=>{this.setInitialValue(),this.setSelectOptions()}),this.mutationObserver.observe(this.el,{childList:!0})}ddsSelectInputClicked(t){this.toggleOptionValue(t.detail.value)}getOptionFromValue(t){return this.childOptions.find(s=>s.value===t)}toggleOptionValue(t){if(!this.multiple){const s=this.childOptions.find(t=>t.selected);if(s){if(s.value===t)return;s.selected=!1}this.el.querySelector("dds-popper").hide()}const s=this.getOptionFromValue(t);s.selected=!s.selected,this.setSelectOptions();const e=this.selectOptions.filter(t=>t.selected).map(t=>t.value);this.value=this.multiple?e:e[0],this.ddsSelectValueChanged.emit({value:this.value})}get filteredOptions(){return this.filterQuery?this.selectOptions.filter(t=>t.label.includes(this.filterQuery)||t.value.includes(this.filterQuery)):this.selectOptions}renderFilteringContent(){if(this.filterable)return s("div",{class:"dds-select__filter"},s("dds-input",{ref:t=>this.filterInput=t,value:this.filterQuery,onInput:t=>this.filterQuery=t.target.value},s("dds-icon",{icon:"search",slot:"before"}),s("dds-icon",{icon:"cross-thin",slot:"after",onClick:()=>this.filterQuery=""})))}renderInput(){return s(this.multiple?"dds-select-input-multiple":"dds-select-input",{value:this.value,placeholder:this.placeholder,onDdsSelectInputClicked:t=>this.ddsSelectInputClicked(t)})}render(){const t=`${this.inputId}__label`,i=["dds-select",this.disabled?"dds-select--is-disabled":void 0,this.valid?"dds-select--invalid":void 0].join(" ");return s(e,{id:t,class:i,role:"combobox","aria-haspopup":"dialog","aria-disabled":this.disabled?"true":null,"aria-labelledby":t,"aria-expanded":`${this.expanded}`},s("slot",null),s("dds-popper",{onPopperValueChanged:t=>{this.expanded=t.detail.value}},s("dds-popper-anchor",null,s("slot",{name:"input-section"},this.renderInput())),s("dds-popper-content",null,s("dds-panel",{class:"dds-select__content-panel"},this.renderFilteringContent(),s("div",null,this.filteredOptions.map(t=>s("dds-select-option",{key:t.id,value:t.value,disabled:t.disabled,selected:t.selected,onDdsSelectOptionClicked:t=>this.toggleOptionValue(t.detail.value)},t.label)))))))}get el(){return i(this)}static get watchers(){return{expanded:["updatePanelContents"]}}static get style(){return".dds-select__filter{background-color:var(--color-grey-10);margin-top:-8px;padding:4px 8px 4px 12px}"}};let h=0;const r=class{constructor(s){t(this,s),this.optionId=`dds-select-option__${c++}`,this.disabled=!1,this.selected=!1,this.ddsSelectOptionClicked=d(this,"ddsSelectOptionClicked",7)}onOptionClicked(t){t.stopPropagation(),this.disabled||this.ddsSelectOptionClicked.emit({id:this.optionId,value:this.value,selected:!this.selected})}componentWillLoad(){if(!this.el.closest("dds-select"))throw new Error("dds-select-option should be nested in a dds-select component")}render(){const t=["dds-select-option",this.selected?"dds-select-option--selected":void 0,this.disabled?"dds-select-option--disabled":void 0].join(" ");return s(e,{role:"option",id:this.optionId,class:t},s("dds-list-item",{button:!0,disabled:this.disabled,selected:this.selected,onClick:t=>this.onOptionClicked(t)},s("slot",null)))}get el(){return i(this)}static get style(){return"dds-select-option{display:none}.dds-select__content-panel dds-select-option{display:block}"}};let c=0;export{l as dds_dropdown,n as dds_label,o as dds_select,r as dds_select_option};