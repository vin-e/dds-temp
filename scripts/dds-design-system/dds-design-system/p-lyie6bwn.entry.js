import{r as s,d as t,h as i,H as e,c as h}from"./p-31571bfb.js";import"./p-96d88537.js";var a;!function(s){s.click="click",s.hover="hover"}(a||(a={}));let d=0;class l{constructor(s,t,i){this.active=!1;const e=s=>{const t=s[0].parent;return t?(s.unshift(t),e(s)):s};this.value=s.value,this.label=s.label,this.disabled=s.disabled||!1,this.config=t,this.parent=i||null,this.level=this.parent?this.parent.level+1:1,this.uid=d++,this.pathNodes=e([this]),this.children=(s.children||[]).map(s=>new l(s,this.config,this)),this.hasChildren=this.children.length>0}getPathValues(){return this.pathNodes.map(s=>s.value)}getPathLabels(){return this.pathNodes.map(s=>s.label)}isLeaf(){return!this.hasChildren}toJSON(){return{uid:this.uid,level:this.level,value:this.value,label:this.label,disabled:this.disabled,path:this.getPathValues(),pathLabels:this.getPathLabels(),hasChildren:this.hasChildren,isLeaf:!this.hasChildren,active:this.active}}}const r=class{constructor(i){s(this,i),this.defaultProps={expandTrigger:a.click,displayDelimiter:" - "},this.props={},this.placeholder="",this.nodes=[],this.displayedMenus=[[]],this.activePath=[],this.config=Object.assign(Object.assign({},this.defaultProps),this.props),this.popperActive=!1,this.labels=[],this.nodeSelected=t(this,"nodeSelected",7)}handleNodeClicked(s){const t=s.detail,{expandTrigger:i}=t.config;if(t.isLeaf())return this.checked=t.value,this.labels=t.getPathLabels(),this.el.querySelector("dds-popper").hide(),void this.nodeSelected.emit(t.getPathValues());i===a.click&&(this.addMenu(t),this.setActive(t))}handleNodeHover(s){const t=s.detail,{expandTrigger:i}=t.config;i===a.hover&&(this.addMenu(s.detail),this.setActive(t))}handleShowPopper(s){this.popperActive=s.detail.value}componentWillUpdate(){this.options&&(this.nodes=this.options.map(s=>new l(s,this.config,null)),this.displayedMenus=[this.nodes])}requiredProvided(){return this.options&&0!==this.options.length}addMenu(s){const{level:t,hasChildren:i}=s,e=this.activePath.slice(0,t-1),h=this.displayedMenus.slice(0,t);i&&(e.push(s),h.push(s.children)),this.activePath=e,this.displayedMenus=h}setActive(s){const t=t=>(t.active=t.uid===s.uid,t),i=this.displayedMenus;i.splice(s.level-1,1,this.displayedMenus[s.level-1].map(t));const e=this.nodes.map(t);this.nodes=e,this.displayedMenus=i}render(){const s=this.labels.join(this.config.displayDelimiter)||"";return i(e,{class:"dds-cascader"},i("dds-popper",{onPopperValueChanged:this.handleShowPopper.bind(this)},i("dds-popper-anchor",null,i("dds-input",{class:"dds-cascader__input",value:s,placeholder:this.placeholder,readonly:!0},i("dds-icon",{class:"dds-cascader__input-icon",slot:"after",icon:"caret-down"}))),i("dds-popper-content",{class:"dds-cascader__popper-content"},this.displayedMenus.map(s=>i("dds-cascader-menu",{activePath:this.activePath,checked:this.checked,nodes:s})))))}get el(){return h(this)}static get style(){return"dds-cascader{--icon-transform-rate:.3s}dds-cascader .dds-input__input{cursor:pointer}.dds-cascader__input-icon{color:var(--color-grey-06)}dds-cascader .dds-popper--active dds-popper-content{display:-ms-flexbox;display:flex}"}},n=class{constructor(t){s(this,t)}render(){const s=this.label?i("span",{class:"dds-column-label__label","aria-label":"label: "+this.label},this.label," "):void 0,t=this.name?i("span",{class:"dds-column-label__name","aria-label":"name: "+this.name},this.name):void 0,h=this.label&&this.name?i("span",{class:"dds-column-label__separator","aria-label":","},": "):void 0;return i(e,{class:"dds-column-label"},i("dds-column-label-icon",{datatype:this.datatype}),s,h,t)}static get style(){return".dds-column-label{font-size:var(--font-size-0_875,.875rem)}.dds-column-label__label{color:var(--color-grey-01);vertical-align:middle}.dds-column-label__name{font-family:var(--font-mono-family,monospace);color:var(--color-grey-06);vertical-align:bottom}.dds-column-label__separator{color:var(--color-grey-08);vertical-align:middle}"}};export{r as dds_cascader,n as dds_column_label};