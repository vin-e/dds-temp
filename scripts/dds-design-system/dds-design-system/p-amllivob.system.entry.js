var __awaiter=this&&this.__awaiter||function(e,t,i,r){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,l){function s(e){try{u(r.next(e))}catch(t){l(t)}}function a(e){try{u(r["throw"](e))}catch(t){l(t)}}function u(e){e.done?i(e.value):n(e.value).then(s,a)}u((r=r.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,n,l,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return u([e,t])}}function u(s){if(r)throw new TypeError("Generator is already executing.");while(i)try{if(r=1,n&&(l=s[0]&2?n["return"]:s[0]?n["throw"]||((l=n["return"])&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;if(n=0,l)s=[s[0]&2,l.value];switch(s[0]){case 0:case 1:l=s;break;case 4:i.label++;return{value:s[1],done:false};case 5:i.label++;n=s[1];s=[0];continue;case 7:s=i.ops.pop();i.trys.pop();continue;default:if(!(l=i.trys,l=l.length>0&&l[l.length-1])&&(s[0]===6||s[0]===2)){i=0;continue}if(s[0]===3&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(s[0]===6&&i.label<l[1]){i.label=l[1];l=s;break}if(l&&i.label<l[2]){i.label=l[2];i.ops.push(s);break}if(l[2])i.ops.pop();i.trys.pop();continue}s=t.call(e,i)}catch(a){s=[6,a];n=0}finally{r=l=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};System.register(["./p-7aa50e68.system.js","./p-dd1cb54a.system.js","./p-910dd298.system.js","./p-0b327293.system.js","./p-ed969063.system.js"],(function(e){"use strict";var t,i,r,n,l,s,a,u,o,d,c,f,h;return{setters:[function(e){t=e.r;i=e.d;r=e.h;n=e.H;l=e.c},function(){},function(){},function(){},function(e){s=e.c;a=e.C;u=e.a;o=e.i;d=e.b;c=e.g;f=e.d;h=e.o}],execute:function(){var p;(function(e){e["andClicked"]="andClicked";e["orClicked"]="orClicked";e["removeClicked"]="removeClicked"})(p||(p={}));var v=e("dds_filter",function(){function e(e){t(this,e);this.operator="=";this.value1="";this.value2="";this.isCreatingFilter=false;this.andClicked=i(this,"andClicked",7);this.orClicked=i(this,"orClicked",7);this.removeClicked=i(this,"removeClicked",7);this.filterChanged=i(this,"filterChanged",7)}e.prototype.rePopulateValues=function(){if(this.filter.column){var e=this.getFormatTypeFromColumn(this.filter.column);this.filter=Object.assign(Object.assign({},this.filter),{columnFormatType:e})}if((this.filter.opOrFun==="="||this.filter.opOrFun==="<>")&&this.filter.values[0].toLowerCase()==="na"){this.operator=this.filter.opOrFun==="="?"na":"!na";return}else{this.operator=this.filter.opOrFun}if(this.filter.values.length>0){this.value1=this.filter.values[0]}if(this.filter.values.length>1){this.value2=this.filter.values[1]}this.emitFilterChanged();this.isCreatingFilter=false};e.prototype.createNewFilter=function(e){if(e===void 0){e={}}return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.isCreatingFilter=true;this.filter=s(e);this.rePopulateValues();return[2]}))}))};e.prototype.componentWillLoad=function(){if(!this.columns){throw new Error("dds-filter requires a valid array of columns")}if(this.filter){this.isCreatingFilter=true;this.rePopulateValues()}};e.prototype.componentDidLoad=function(){this.emitFilterChanged()};e.prototype.emitFilterChanged=function(){if(this.filter&&!this.isCreatingFilter){this.filterChanged.emit({filter:this.filter})}};e.prototype.updateValue1=function(){var e=[this.value1,this.filter.values[1]];this.filter=Object.assign(Object.assign({},this.filter),{values:e});this.emitFilterChanged()};e.prototype.updateValue2=function(){var e=[this.filter.values[0],this.value2];this.filter=Object.assign(Object.assign({},this.filter),{values:e});this.emitFilterChanged()};e.prototype.getValueFromColumn=function(e){var t=this.columns.filter((function(t){return t.name===e}));return t?t[0]:undefined};e.prototype.getFormatTypeFromColumn=function(e){if(!e)return undefined;var t=this.columns.find((function(t){return t.name===e}));if(!t)return undefined;var i=t.displayFormatting&&t.displayFormatting.colorType||t.type;if(i){if(a.text.includes(i))return u.text;if(a.date.includes(i))return u.date;if(a.numeric.includes(i))return u.numeric}return undefined};e.prototype.onInputValue1=function(e){this.value1=e.target.value;if(this.value2&&!o(this.operator)){this.value2=undefined}};e.prototype.onClick=function(e){this[e].emit({id:this.filter.id});var t=this.el.querySelector("dds-dropdown");t.hide()};e.prototype.onChangeOperator=function(e){var t=e.detail.value;this.operator=t;if(d(t)){if(t==="na"){t="="}else{t="<>"}this.filter.values=["na"]}else if(o(t)){this.filter=Object.assign(Object.assign({},this.filter),{values:[this.value1,this.value2]})}else{this.filter=Object.assign(Object.assign({},this.filter),{values:[this.value1]})}this.filter=Object.assign(Object.assign({},this.filter),{opOrFun:t});this.emitFilterChanged()};e.prototype.onChangeColumn=function(e){var t=e.detail.value;var i=this.getValueFromColumn(t).type;var r=c(this.operator).allowedTypes.includes(i);if(!r){this.operator="=";this.filter=Object.assign(Object.assign({},this.filter),{values:[this.value1],opOrFun:"="})}var n=this.getFormatTypeFromColumn(t);this.filter=Object.assign(Object.assign({},this.filter),{column:t,columnFormatType:n});this.emitFilterChanged()};e.prototype.render=function(){var e=this;if(!this.filter)return;var t=this.filter.column?this.getValueFromColumn(this.filter.column).type===f.date:false;var i=t?"date":undefined;var l=o(this.operator)?r("div",null,r("div",{class:"dds-filter__multiple-values"},r("div",null,r("dds-label",{class:"dds-filter__label","component-id":"value1"},"Value 1"),r("dds-input",{id:"value1",value:this.value1,type:i,onInput:function(t){return e.onInputValue1(t)}})),r("div",{class:"dds-filter__value-separator"},"â€“"),r("div",null,r("dds-label",{class:"dds-filter__label","component-id":"value2"},"Value 2"),r("dds-input",{id:"value2",value:this.value2,type:i,onInput:function(t){return e.value2=t.target.value}})))):c(this.operator).numberOfInputs===1?r("div",null,r("dds-label",{class:"dds-filter__label","component-id":"value"},"Value"),r("dds-input",{id:"value",value:this.value1,type:i,onInput:function(t){return e.onInputValue1(t)}})):undefined;var s=r("div",{class:"dds-filter__dropdown"},r("dds-dropdown",null,r("div",null,r("dds-list-item",{button:true,onClick:function(){return e.onClick(p.andClicked)}},"And"),r("dds-list-item",{button:true,onClick:function(){return e.onClick(p.orClicked)}},"Or"),r("dds-list-item",{button:true,onClick:this.isFirstFilter?undefined:function(){return e.onClick(p.removeClicked)},disabled:this.isFirstFilter},"Remove"))));var a=this.filter.column?h.filter((function(t){return t.allowedTypes.includes(e.getValueFromColumn(e.filter.column).type)})):h.filter((function(e){return e.allowedTypes.length>=5}));return r(n,{id:"dds-filter-"+this.filter.id},r("div",{class:"dds-filter__container"},r("div",{class:d(this.operator)?undefined:"dds-filter__full-row"},r("div",{class:"dds-filter__column-operator"},r("div",{id:"dds-filter__column"},r("dds-label",{class:"dds-filter__label"},"Column"),r("dds-select",{onDdsSelectValueChanged:function(t){return e.onChangeColumn(t)},placeholder:"Select a column"},this.columns.map((function(t){return r("dds-select-option",{value:t.name,selected:e.filter.column===t.name,key:t.name},t.label)})))),r("div",{id:"dds-filter__operator"},r("dds-label",{class:"dds-filter__label"},"Operator"),r("dds-select",{onDdsSelectValueChanged:function(t){return e.onChangeOperator(t)}},a.map((function(t){return r("dds-select-option",{value:t.value,selected:e.operator===t.value,key:t.value},t.label)})))))),d(this.operator)?s:undefined,l,!d(this.operator)?s:undefined))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:true,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{value1:["updateValue1"],value2:["updateValue2"]}},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return".dds-filter__container{display:grid;grid-gap:8px;grid-template-columns:auto 28px}.dds-filter__multiple-values{display:grid;grid-template-columns:auto 8px auto;grid-gap:4px}.dds-filter__column-operator{display:grid;grid-template-columns:auto auto;grid-gap:8px}.dds-filter__full-row{grid-column:1/span 2}.dds-filter__dropdown{margin-top:17px}.dds-filter__label{text-transform:uppercase}.dds-filter__value-separator{padding-top:21px;text-align:center;color:var(--color-grey-01)}"},enumerable:true,configurable:true});return e}())}}}));